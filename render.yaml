services:
  # Backend - Express API
  - type: web
    name: edu-news-api
    env: node
    repo: https://github.com/laxmiv101085-web/Edu-News.git
    branch: main
    rootDir: apps/api
    buildCommand: npm install
    startCommand: node src/index.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "10000"
      - key: DATABASE_URL
        value: postgresql://neondb_owner:npg_2IKtOBFq8MQZ@ep-twilight-snow-a10gdjoy-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require
      - key: JWT_SECRET
        value: "88c56dddd9139bcc4b4ec088bc2b6c72dda07b0887c349584b2b5aa0c1bab842ce817a718acafc7527c9d03eb383c1c3b7cd7c7c7ef49e1e5402c5bd4984a616"
      - key: NEWS_API_KEY
        value: 172149081aca4657947b6f3efdd084b9
      - key: CORS_ORIGIN
        value: https://edu-news-35vza0wnv-vickyrrrrrrs-projects.vercel.app
      - key: NEWS_SOURCES
        value: "https://indianexpress.com/section/education/feed/,https://www.thehindu.com/education/feeder/default.rss,https://timesofindia.indiatimes.com/rssfeeds/913168846.cms,https://www.india.com/education/feed/,https://www.news18.com/rss/education.xml,https://www.hindustantimes.com/feeds/rss/education/rssfeed.xml"
    plan: free
    region: oregon
    healthCheckPath: /health
    autoDeploy: true
    
  # Frontend - Next.js Web App (Deploy separately if needed)
  # - type: web
  #   name: edu-news-web
  #   env: node
  #   repo: https://github.com/laxmiv101085-web/Edu-News.git
  #   branch: main
  #   rootDir: apps/web
  #   buildCommand: npm install --prefix . && npm run build
  #   startCommand: npm start
  #   envVars:
  #     - key: NODE_ENV
  #       value: production
  #     - key: NEXT_PUBLIC_API_URL
  #       value: https://edu-news-api.onrender.com
  #   plan: free
  #   region: oregon
